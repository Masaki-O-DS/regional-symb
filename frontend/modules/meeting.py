import streamlit as st


def show():
    st.title("📝 議事録")
    st.write("会議の議事録を確認・共有できます。")

    # ——— 既存の議事録を確認 ——— #
    st.subheader("📖 議事録一覧")
    # ダミーの議事録データ（内容を充実）
    minutes = [
        {
            "title": "2025-05-10 定例会議",
            "content": (
                "1. 予算案承認：\n"
                "   - 2025年度活動予算として総額120万円を承認\n"
                "   - 備品購入費用は前年度比+5%で計上\n"
                "2. 次回イベント日程検討：\n"
                "   - 夏祭り開催案：8月15日午後3時〜7時\n"
                "   - 会場候補：中央公園または市民広場\n"
                "3. 広報活動：\n"
                "   - チラシ配布開始日を6月1日に設定\n"
                "   - SNS投稿は週2回ペースで実施\n"
            ),
        },
        {
            "title": "2025-04-26 プロジェクトA打ち合わせ",
            "content": (
                "1. 進捗報告：\n"
                "   - 機能設計フェーズ完了\n"
                "   - 現在、フロントエンド実装着手中\n"
                "2. 課題の洗い出し：\n"
                "   - 認証周りのテストケース未整備\n"
                "   - APIレスポンス遅延問題\n"
                "3. 次回アクションアイテム設定：\n"
                "   - テスト設計担当：田中さん\n"
                "   - パフォーマンスチューニング：鈴木さんまで\n"
            ),
        },
        {
            "title": "2025-04-12 安全対策委員会",
            "content": (
                "1. 防災訓練の振り返り：\n"
                "   - 出席者150名、想定時間30分で実施\n"
                "   - 避難動線に一部混雑箇所あり\n"
                "2. 新規マニュアル案レビュー：\n"
                "   - 手順書Ver.2ドラフト提示\n"
                "   - 初動対応フローの簡素化提案\n"
            ),
        },
        {
            "title": "2025-03-08 環境保全ワークショップ",
            "content": (
                "1. テーマ設定：\n"
                "   - 地域清掃活動の年間計画\n"
                "2. 参加者募集：\n"
                "   - 学校連携で学生30名を予定\n"
                "3. 資材調達計画：\n"
                "   - ゴミ袋、軍手、トングを500セット発注\n"
            ),
        },
        {
            "title": "2025-02-22 定例アンケート結果報告",
            "content": (
                "1. 回答率：\n"
                "   - 町内全世帯500世帯中、320件（64%）\n"
                "2. 主な要望：\n"
                "   - 交通安全対策強化\n"
                "   - 高齢者見守りサービスへの期待\n"
                "3. 次回対応：\n"
                "   - 市との合同会議を5月に設定\n"
            ),
        },
    ]
    titles = [m["title"] for m in minutes]
    selected = st.selectbox("閲覧する議事録を選択", titles)
    # 選択された議事録の中身を表示
    content = next(m["content"] for m in minutes if m["title"] == selected)
    st.markdown(f"**{selected}**")
    st.write(content)

    st.markdown("---")

    # ——— 音声データアップロード & 要約生成 ——— #
    st.subheader("🎤 音声から議事録要約を生成")
    audio_file = st.file_uploader(
        "音声ファイルをアップロード", type=["wav", "mp3", "m4a"]
    )
    if audio_file:
        st.audio(audio_file)
    if st.button("要約を生成"):
        if not audio_file:
            st.warning("まずは音声ファイルをアップロードしてください。")
        else:
            with st.spinner("AIが要約を生成中…"):
                # ここにAI要約処理を組み込んでください
                summary = "（ここに自動生成された要約が表示されます）"
            st.subheader("📝 要約結果")
            st.write(summary)
